#include <iostream>
#include <Windows.h>
#include <string>
#include <vector>

#include "RLUA.h"





void ConsoleBypass(const char* Title) {
	DWORD aaaa;
	VirtualProtect((PVOID)&FreeConsole, 1, PAGE_EXECUTE_READWRITE, &aaaa);
	*(BYTE*)(&FreeConsole) = 0xC3;
	AllocConsole();
	SetConsoleTitleA(Title);
	freopen("CONOUT$", "w", stdout);
	freopen("CONIN$", "r", stdin);
	HWND ConsoleHandle = GetConsoleWindow();
	::SetWindowPos(ConsoleHandle, HWND_TOPMOST, 0, 0, 0, 0, SWP_DRAWFRAME | SWP_NOMOVE | SWP_NOSIZE | SWP_SHOWWINDOW);
	::ShowWindow(ConsoleHandle, SW_NORMAL);
}








int main() {

	ConsoleBypass("Nigger");

	auto SCVFTBLE = x(0xD33DB33F);


	std::cout << "Yeet Started scanning...... " << "\n";
	ScriptContext = Memory::Scan((BYTE*)&SCVFTBLE, (BYTE*)"xxxx", PAGE_READWRITE);
	if (!ScriptContext) {
		printf("ScriptContext Scan Failed!\n");
		system("pause");
		exit(0);
	}

	int v39 = ScriptContext;
	int v51 = 0;
	RESTATE = (v39 + 56 * v51 + 172) ^ *(DWORD *)(v39 + 56 * v51 + 172);
	printf("Finished the scanning....\n");




	return 1;
}


BOOL APIENTRY DllMain(HMODULE Module, DWORD Reason, void* Reserved)
{
	switch (Reason)
	{
	case DLL_PROCESS_ATTACH:
		DisableThreadLibraryCalls(Module);
		CreateThread(NULL, NULL, (LPTHREAD_START_ROUTINE)main, NULL, NULL, NULL);
		break;
	case DLL_PROCESS_DETACH:
		//MH_Uninitialize();
		exit(0);
		break;
	default: break;
	}
	return TRUE;
}

